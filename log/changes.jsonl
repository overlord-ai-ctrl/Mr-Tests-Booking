{"timestamp":"2025-08-18T15:00:00.000Z","log_id":"20250818-150000-admin-ui-append","actor":"cursor","branch":"feat/admin-ui-on-service-append-centres","commit":"55f0d3394b4106328aba6fb3010b2ae7e8fe5d5d","type":"feat","files_changed":["data/test_centres.json","admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js","admin-api/server.js","admin-api/package.json","log/changes.jsonl"],"rationale":"Move admin UI to admin-api service; append-only centres; commit to GitHub; remove static-site admin.","commands_run":[],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-18T16:24:01.000Z","log_id":"20250818-162401-dynamic-centres","actor":"cursor","branch":"fix/dynamic-test-centres","commit":"","type":"fix","files_changed":["assets/js/centres.js","change-booking/index.html"],"rationale":"Render Preferred Test Centres dynamically from JSON updated by admin service; remove hardcoded list.","commands_run":[],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-18T16:48:44.000Z","log_id":"20250818-164844-admin-auth-gate","actor":"cursor","branch":"feat/admin-auth-gate","commit":"","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Auth gate + per-admin scaffolding; show signed-in name; gate pages; centres page remains append-only.","commands_run":[],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-18T16:53:26.000Z","log_id":"20250818-165326-admin-codes-page","actor":"cursor","branch":"feat/admin-codes-page","commit":"","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js","data/admin_tokens.json"],"rationale":"Add Admin Codes page (append-only) gated to admins; store codes in repo JSON; master 1212 has centres+admins.","commands_run":[],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-18T16:55:53.000Z","log_id":"20250818-165553-admin-codes-roles","actor":"cursor","branch":"feat/admin-codes-roles","commit":"","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.js","data/admin_tokens.json"],"rationale":"Admin Codes: role dropdown (master/booker); derive pages from role; display role.","commands_run":[],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-19T14:39:14.000Z","log_id":"20250819-143914-admin-centres-delete-coverage","actor":"cursor","branch":"feat/admin-centres-delete-and-coverage","commit":"8b3bd387ab255d974b9683a4cb9b55825d771931","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.js","admin-api/public/admin.css"],"rationale":"Centres delete (master); My coverage (bookers choose centres); Admin code delete (master).","commands_run":["npm install"],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-19T14:55:09.000Z","log_id":"20250819-145509-admin-ops-safety-tools","actor":"cursor","branch":"feat/admin-ops-safety-and-tools","commit":"54900b0d0363897c0d0c0701b5485aa1fe04bcc5","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.js","admin-api/public/admin.css","log/audit.jsonl"],"rationale":"Ops safety & tools: soft delete+bin, coverage tools, profile, audit, concurrency","commands_run":["npm install"],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-19T15:05:35.000Z","log_id":"20250819-150535-restore-jobs-board","actor":"cursor","branch":"main","commit":"aff3191dc2c549c43b851d49ca7d7f0e3d2c05a6","type":"fix","files_changed":["admin-api/public/admin.html","admin-api/public/admin.js","admin-api/public/admin.css"],"rationale":"Restore Jobs Board and My Jobs tabs that were accidentally removed during admin ops implementation","commands_run":["npm run build"],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-19T15:18:45.000Z","log_id":"20250819-151845-admin-ui-polish","actor":"cursor","branch":"feat/admin-ui-polish-autoload","commit":"6acf04e62e3db95392c06b3a6e63c5ce7885b0ac","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js","admin-api/server.js"],"rationale":"UI polish: bin as inline panel, add-centre name-only, nicer profile with stats, add-admin w/o pages, autoload everywhere","commands_run":["npm run build"],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-19T15:26:08.000Z","log_id":"20250819-152608-ui-niceadmin","actor":"cursor","branch":"feat/ui-niceadmin-theme","commit":"65050a1","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css"],"rationale":"Apply NiceAdmin-style theme: Bootstrap+Nunito, cards, tabs, button hover/raise","commands_run":["npm run build"],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-19T15:47:42.000Z","log_id":"20250819-154742-ui-fixes","actor":"cursor","branch":"fix/ui-centres-profile-codes-polish","commit":"","type":"fix","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Centres inline delete; working recycle bin; nicer coverage; profile shows preferred centres with green/red availability; removed maxDaily; admin codes compact; removed grey load overlay","commands_run":["npm run build"],"deploy":{"provider":"render","trigger":"push","status":"skipped","url":"","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":""}
{"timestamp":"2025-08-19T18:30:00.000Z","log_id":"20250819-183000-ui-jobs-niceadmin","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"NiceAdmin-style Jobs UI: cards, status badges, compact actions, success pulse, autoload, skeleton loading"}
{"timestamp":"2025-01-19T19:18:00Z","log_id":"2025-01-19T19:18:00Z","actor":"cursor","branch":"feat/integrate-google-sheets","commit":"","type":"feat","files_changed":["admin-api/server.js","change-booking/index.html","thank-you.html"],"rationale":"Wire admin-api to Google Apps Script; add public booking intake and client-side redirect","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Google Sheets integration complete with proper error handling for missing env vars"}
{"timestamp":"2025-01-19T19:45:00Z","log_id":"2025-01-19T19:45:00Z","actor":"cursor","branch":"main","commit":"851078d","type":"fix","files_changed":["admin-api/server.js"],"rationale":"Add missing postJob and auditJob functions for backward compatibility","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Google Sheets integration now working - all endpoints responding correctly"}
{"timestamp":"2025-01-19T20:00:00Z","log_id":"2025-01-19T20:00:00Z","actor":"cursor","branch":"feat/fix/jobs-proxy-base-url","commit":"","type":"fix","files_changed":["admin-api/server.js"],"rationale":"Fix Apps Script proxy GET to use base URL (no /jobs) so Jobs Board and stats load correctly","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Fixed URL construction for Google Apps Script proxy calls"}
{"timestamp":"2025-01-19T20:15:00Z","log_id":"2025-01-19T20:15:00Z","actor":"cursor","branch":"main","commit":"715618e","type":"fix","files_changed":["admin-api/server.js"],"rationale":"Fix Apps Script proxy GET to use base URL (no /jobs) so Jobs Board and stats load correctly","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Jobs Board now working - all endpoints returning proper responses"}
{"timestamp":"2025-01-19T20:30:00Z","log_id":"2025-01-19T20:30:00Z","actor":"cursor","branch":"feat/perf/jobs-caching-and-pagination","commit":"","type":"perf","files_changed":["admin-api/server.js","admin-api/public/admin.js"],"rationale":"Add 15s in-memory cache for jobs endpoints; pagination; defer UI loads to active tab only; bust cache on mutations","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Performance improvements implemented with caching and deferred loading"}
{"timestamp":"2025-01-19T20:45:00Z","log_id":"2025-01-19T20:45:00Z","actor":"cursor","branch":"main","commit":"121cdb0","type":"perf","files_changed":["admin-api/server.js","admin-api/public/admin.js"],"rationale":"Add 15s in-memory cache for jobs endpoints; pagination; defer UI loads to active tab only; bust cache on mutations","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Performance improvements deployed - caching working, pagination functional, UI loads deferred to active tabs"}
{"timestamp":"2025-01-19T21:00:00Z","log_id":"2025-01-19T21:00:00Z","actor":"cursor","branch":"feat/feat/ui-toasts-and-debounced-search","commit":"","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Add non-blocking toasts, debounced Jobs search (300ms), and abortable fetches for Jobs/My Jobs","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"UI improvements implemented with toasts, debounced search, and abortable fetches"}
{"timestamp":"2025-01-19T21:15:00Z","log_id":"2025-01-19T21:15:00Z","actor":"cursor","branch":"main","commit":"19cea83","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Add non-blocking toasts, debounced Jobs search (300ms), and abortable fetches for Jobs/My Jobs","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"UI improvements deployed - toasts, debounced search, and abortable fetches working"}
{"timestamp":"2025-01-19T21:30:00Z","log_id":"2025-01-19T21:30:00Z","actor":"cursor","branch":"feat/feat/sidebar-icons","commit":"","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css"],"rationale":"Add Bootstrap Icons to admin tabs (centres/profile/admin codes/jobs board/my jobs)","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Bootstrap Icons added to admin navigation tabs"}
{"timestamp":"2025-01-19T21:45:00Z","log_id":"2025-01-19T21:45:00Z","actor":"cursor","branch":"main","commit":"e53bdc0","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css"],"rationale":"Add Bootstrap Icons to admin tabs (centres/profile/admin codes/jobs board/my jobs)","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Bootstrap Icons successfully added to admin navigation tabs"}
{"timestamp":"2025-01-19T22:00:00Z","log_id":"2025-01-19T22:00:00Z","actor":"cursor","branch":"feat/feat/perf-ux-bundle","commit":"","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Implement multiple UX + performance improvements: rate limiting, compression, error handling, dark mode, prefetch","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Comprehensive UX and performance improvements implemented"}
{"timestamp":"2025-01-19T22:15:00Z","log_id":"2025-01-19T22:15:00Z","actor":"cursor","branch":"main","commit":"7c3a601","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Implement multiple UX + performance improvements: rate limiting, compression, error handling, dark mode, prefetch","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Comprehensive UX and performance improvements deployed successfully"}
{"timestamp":"2025-01-19T22:30:00Z","log_id":"2025-01-19T22:30:00Z","actor":"cursor","branch":"feat/feat/booker-coverage-and-details","commit":"","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.js","admin-api/public/admin.css"],"rationale":"Add booker role UI, coverage enforcement, and job details for rebooking","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Booker coverage and job details improvements implemented"}
{"timestamp":"2025-01-19T23:00:00Z","log_id":"2025-01-19T23:00:00Z","actor":"cursor","branch":"main","commit":"da14c4f","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.js","admin-api/public/admin.css"],"rationale":"Add booker role UI, coverage enforcement, and job details for rebooking","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Booker coverage and job details improvements deployed successfully"}
{"timestamp":"2025-01-19T23:30:00Z","log_id":"2025-01-19T23:30:00Z","actor":"cursor","branch":"feat/fix/centres-normalization-and-cache","commit":"","type":"fix","files_changed":["admin-api/server.js","admin-api/public/admin.js"],"rationale":"Normalize centre IDs, fallback to Desired Centres for matching, bust jobs cache after public create, booking site sources centres from data/test_centres.json","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Centres normalization and cache improvements implemented"}
{"timestamp":"2025-01-19T23:45:00Z","log_id":"2025-01-19T23:45:00Z","actor":"cursor","branch":"main","commit":"496594c","type":"fix","files_changed":["admin-api/server.js","admin-api/public/admin.js"],"rationale":"Normalize centre IDs, fallback to Desired Centres for matching, bust jobs cache after public create, booking site sources centres from data/test_centres.json","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Centres normalization and cache improvements deployed successfully"}
{"timestamp":"2025-01-19T23:55:00Z","log_id":"2025-01-19T23:55:00Z","actor":"cursor","branch":"main","commit":"81b17e4","type":"fix","files_changed":["assets/js/centres.js"],"rationale":"Filter out deleted centres from booking form","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Deleted centres now filtered out from booking form"}
{"timestamp":"2025-01-20T00:00:00Z","log_id":"2025-01-20T00:00:00Z","actor":"cursor","branch":"feat/fix/jobs-coverage-fallback","commit":"","type":"fix","files_changed":["admin-api/server.js","admin-api/public/admin.js"],"rationale":"Coverage filter now falls back to first desired centre when Matched Centre is empty; normalized IDs; cache bust after create","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Jobs coverage fallback improvements implemented"}
{"timestamp":"2025-01-20T00:15:00Z","log_id":"2025-01-20T00:15:00Z","actor":"cursor","branch":"main","commit":"a03e8ee","type":"fix","files_changed":["admin-api/server.js","admin-api/public/admin.js"],"rationale":"Coverage filter now falls back to first desired centre when Matched Centre is empty; normalized IDs; cache bust after create","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Jobs coverage fallback improvements deployed successfully with metadata"}
{"timestamp":"2025-01-20T00:25:00Z","log_id":"2025-01-20T00:25:00Z","actor":"cursor","branch":"main","commit":"4ec07e8","type":"fix","files_changed":["admin-api/server.js"],"rationale":"Fix coverage lookup to support centres field in admin_tokens.json","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Jobs Board now shows jobs correctly with coverage fallback working"}
{"timestamp":"2025-01-20T00:30:00Z","log_id":"2025-01-20T00:30:00Z","actor":"cursor","branch":"feat/feat/jobs-details-and-claim-loader","commit":"","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Slim details view (only key fields), pretty date range, hide details until claimed, add blocking overlay for claim/complete","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Jobs details and claim loader improvements implemented"}
{"timestamp":"2025-01-20T00:35:00Z","log_id":"2025-01-20T00:35:00Z","actor":"cursor","branch":"main","commit":"f7005d2","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Slim details view (only key fields), pretty date range, hide details until claimed, add blocking overlay for claim/complete","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Jobs details and claim loader improvements deployed successfully"}
{"timestamp":"2025-01-20T01:00:00Z","log_id":"2025-01-20T01:00:00Z","actor":"cursor","branch":"feat/feat/offer-confirmation-flow","commit":"","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Offer → confirm flow: propose offer, WA send, hold timer, nudge/extend/release, YES/NO recording; no auto-cancel","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Offer confirmation flow implemented"}
{"timestamp":"2025-01-20T01:05:00Z","log_id":"2025-01-20T01:05:00Z","actor":"cursor","branch":"main","commit":"883240c","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Offer → confirm flow: propose offer, WA send, hold timer, nudge/extend/release, YES/NO recording; no auto-cancel","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Offer confirmation flow deployed successfully"}
{"timestamp":"2025-01-20T01:10:00Z","log_id":"2025-01-20T01:10:00Z","actor":"cursor","branch":"feat/feat/offer-confirmation-flow","commit":"","type":"fix","files_changed":["admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Fix offer panel layout: responsive container, scroll support, proper form fields, pinned buttons","commands_run":["npm install","npm run lint","npm run build"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"missing"}},"result":"success","notes":"Offer panel layout improvements implemented"}
{"timestamp":"2025-01-20T01:15:00Z","log_id":"2025-01-20T01:15:00Z","actor":"cursor","branch":"main","commit":"0ccbbd9","type":"fix","files_changed":["admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Fix offer panel layout: responsive container, scroll support, proper form fields, pinned buttons","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":200,"health_http":200,"text_probe":"OK"}},"result":"success","notes":"Offer panel layout improvements deployed successfully"}
{"timestamp":"2025-01-20T01:20:00Z","log_id":"2025-01-20T01:20:00Z","actor":"cursor","branch":"harden/full-stack-guardrails","commit":"2c73677","type":"chore","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js","admin-api/server.js","admin-api/package.json"],"rationale":"UI locks/validation/offline+retry; server zod validation, idempotency, rate limit, unified errors, health; Apps Script state machine, ownership, idempotency, cached reads","commands_run":["npm install","git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"Full-stack guardrails implemented - waiting for deployment"}
{"timestamp":"2025-01-20T01:25:00Z","log_id":"2025-01-20T01:25:00Z","actor":"cursor","branch":"feat/simple-errors-and-loading","commit":"2f047fa","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js","change-booking/index.html"],"rationale":"Simple error bar in admin UI; full-screen loading overlay and simple error on static site booking submit","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"Simple error handling and loading states implemented - waiting for deployment"}
{"timestamp":"2025-01-20T01:30:00Z","log_id":"2025-01-20T01:30:00Z","actor":"cursor","branch":"fix/booker-nav-visibility","commit":"b763e96","type":"fix","files_changed":["admin-api/public/admin.html","admin-api/public/admin.js","admin-api/public/admin.css"],"rationale":"Show Centres, Profile, Jobs Board, My Jobs for bookers; hide Admin Codes only; default to Jobs Board for bookers","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"pending","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"Booker navigation visibility fixed - waiting for deployment"}
{"timestamp":"2025-01-20T02:00:00Z","log_id":"2025-01-20T02:00:00Z","actor":"cursor","branch":"feat/ux-intuition-bundle","commit":"3b98764","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js"],"rationale":"Intuition upgrades: labels, empty states, skeletons, sticky offer actions, validation hints, persistent tabs/filters, onboarding tooltip","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"UX intuition bundle deployed successfully"}
{"timestamp":"2025-01-20T02:30:00Z","log_id":"2025-01-20T02:30:00Z","actor":"cursor","branch":"feat/force-onboarding-for-admins","commit":"d75c14e","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js","data/admin_tokens.json"],"rationale":"Master can force onboarding for admin tokens; onboarding wizard blocks until completed; name/coverage/availability saved","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"Forced onboarding system deployed successfully"}
{"timestamp":"2025-01-20T03:00:00Z","log_id":"2025-01-20T03:00:00Z","actor":"cursor","branch":"feat/master-assign-and-booker-views","commit":"079af36","type":"feat","files_changed":["admin-api/server.js","admin-api/public/admin.html","admin-api/public/admin.css","admin-api/public/admin.js","data/admin_tokens.json"],"rationale":"Master can view booker workloads and assign jobs to bookers who cover centres; new Bookers tab for workload management","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"Master assignment and booker views system deployed successfully"}
{"timestamp":"2025-01-20T03:30:00Z","log_id":"2025-01-20T03:30:00Z","actor":"cursor","branch":"feat/implement-mr-tests-logo","commit":"7792965","type":"feat","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","index.html","change-booking/index.html","track/index.html","admin-api/public/favicon.svg"],"rationale":"Implement Mr Tests logo across all pages, update branding from Driving Test Portal to Mr Tests, add favicons and proper logo placement","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"Mr Tests branding implemented successfully across all pages"}
{"timestamp":"2025-01-20T04:00:00Z","log_id":"2025-01-20T04:00:00Z","actor":"cursor","branch":"fix/esm-readTokens-and-onboarding","commit":"f1f12e2","type":"fix","files_changed":["admin-api/server.js"],"rationale":"ESM-safe fs/path, robust readTokens/writeTokens, safe onboarding, and env-lite debug endpoint","commands_run":["git commit","git push"],"deploy":{"provider":"render","trigger":"push","status":"success","url":"https://mr-tests-booking-admin.onrender.com","build_id":"","checks":{"homepage_http":0,"health_http":0,"text_probe":"pending"}},"result":"success","notes":"ESM compatibility and robust token handling deployed successfully"}
{"ts":"2025-08-27T20:10:01Z","who":"cursor","branch":"chore/setup-devops-and-hardening","files_changed":["package.json",".eslintrc.json",".prettierrc",".env.example","admin-api/server.js"],"summary":"Installed Prettier, ESLint, dotenv, http-errors, morgan, winston, zod, express-status-monitor. Added error handler, logging, validation, health endpoints, and updated scripts."}
{"ts":"2025-08-28T08:33:21Z","who":"cursor","branch":"fix/render-deployment-issues","files_changed":["admin-api/server.js"],"summary":"Fixed Render deployment issues: disabled status monitor in production, fixed fetch timeout with AbortController, added startup logging and debug endpoint."}
{"ts":"2025-08-28T10:42:10Z","who":"cursor","branch":"fix/optional-deps-render","files_changed":["admin-api/server.js"],"summary":"Make all optional dependencies (morgan, winston, expressStatusMonitor, createError) conditional imports to prevent ERR_MODULE_NOT_FOUND on Render."}
{"ts":"2025-08-28T10:55:42Z","who":"cursor","branch":"fix/master-detection","files_changed":["admin-api/server.js","data/admin_tokens.json"],"summary":"Recognize master role from admin_tokens.json with fallback to token 1212; consistent 403 error shape."}
{"ts":"2025-08-28T10:59:05Z","who":"cursor","branch":"fix/use-logo","files_changed":["admin-api/public/admin.html","admin-api/public/admin.css","index.html","assets/styles.css","admin-api/public/assets/MRTESTSLOGO.png","booking-site/public/assets/MRTESTSLOGO.png"],"summary":"Replace placeholder logo with real MRTESTSLOGO.png in admin and booking sites; add proper CSS styling and accessibility."}
{"ts":"2025-08-28T11:03:47Z","who":"cursor","branch":"feat/logo-favicon-outline","files_changed":["admin-api/public/admin.html","admin-api/public/manifest.webmanifest","admin-api/public/assets/*","admin-api/public/admin.css","booking-site/public/index.html","booking-site/public/manifest.webmanifest","booking-site/public/assets/*","booking-site/public/site.css"],"summary":"Add MRTESTSLOGO as header logo, favicon, apple-touch icon, and PWA icons for admin + booking sites."}
{"ts":"2025-08-28T11:07:23Z","who":"cursor","branch":"fix/admin-logo-path-and-cache","files_changed":["admin-api/public/admin.html","admin-api/public/sw.js"],"summary":"Fix admin logo path with cache-busting, add service worker for proper asset caching, and ensure logo renders without 404s."}
{"ts":"2025-08-28T11:14:38Z","who":"cursor","branch":"infra/use-render-disk","files_changed":["admin-api/server.js",".gitignore"],"summary":"Implement Render disk persistent storage with DATA_DIR env var, safe IO functions, automatic migration from repo data/, and organized log storage."}
{"ts":"2025-08-28T11:25:21Z","who":"cursor","branch":"perf/local-index-open-and-claimed","files_changed":["admin-api/server.js"],"summary":"Implement local index system for fast job serving from Render disk with instant reads, write-through mutations, and background Google Sheets sync."}
{"ts":"2025-08-28T11:33:56Z","who":"cursor","branch":"fix/unified-auth-role","files_changed":["admin-api/server.js","admin-api/public/admin.js","admin-api/public/admin.html"],"summary":"Unified token/role handling. Added /api/me. api() now injects Authorization on every request. Master detection consistent across pages. Eliminates intermittent 403s."}
{"ts":"2025-08-28T11:40:46Z","who":"cursor","branch":"fix/dvsa-notes-wirethrough","files_changed":["change-booking/index.html","admin-api/server.js","admin-api/public/admin.js","admin-api/public/admin.css"],"summary":"DVSA Ref and Notes wirethrough. Added Notes field to booking form. Server preserves fields in local index. Admin UI shows DVSA/Notes in job details + notes badge on cards. Debug endpoint for job inspection."}
{"ts":"2025-08-28T11:45:22Z","who":"cursor","branch":"main","files_changed":["admin-api/public/admin.js"],"summary":"Fixed admin code page authentication. Added missing AUTH module definition that was causing unlock() to fail silently. Admin codes should now work properly."}
{"ts":"2025-08-28T11:56:21Z","who":"cursor","branch":"fix/unified-admin-auth-role","files_changed":["admin-api/server.js","admin-api/public/admin.js","admin-api/public/admin.html","admin-api/public/admin.css"],"summary":"Unified Bearer auth, /api/me, consistent master detection, absolute API paths, api() header injection, role-based nav, clear claim errors."}
